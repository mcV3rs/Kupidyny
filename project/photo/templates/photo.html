{% extends "base.html" %}

{% block content %}
<style>
    #image-editor {
        width: 685px;
        box-shadow: 0 2px 41px 10px #6b82af1a;
        height: 500px;
    }

    .uploaded-imgs-wrapper {
        display: flex;
        flex-wrap: wrap;
        row-gap: 6px;
        column-gap: 6px;
        max-width: 170px;
        max-height: 106px;
        overflow-y: scroll;
        scrollbar-color: #dfe1ec #fff;
        scrollbar-width: thin;
    }

    .uploaded-imgs-wrapper::-webkit-scrollbar {
        width: 5px;
        color: #dfe1ec;
    }

    .uploaded-imgs-wrapper::-webkit-scrollbar-track {
        box-shadow: inset 0 0 5px #f9fafc;
    }

    .uploaded-imgs-wrapper::-webkit-scrollbar-thumb {
        background-color: #dfe1ec;
        border-radius: 4px;
        height: 50px;
    }

    .uploaded-img {
        width: 50px;
        height: 50px;
        background-size: cover;
        border: 2px solid #ffff;
        border-radius: 4px;
        cursor: pointer;
    }

    .default-uploaded-img {
        width: 50px;
        height: 50px;
        cursor: pointer;
        border-radius: 4px;
    }

    .uploaded-img[data-image-editor-active-image=""] {
        border: 2px solid #3daba4;
        transition: border 250ms ease-in-out;
    }

    .add-img {
        width: 50px;
        height: 50px;
        border: 1px solid #dfe1ec;
        background-color: #ffff;
        border-radius: 4px;
        background: url("{{ url_for('static', filename='img/adding-icon.png') }}") center center;
        background-repeat: no-repeat;
        padding-top: 49px;
        cursor: pointer;
    }
</style>

<main class="container">
    <div class="p-5 my-4 bg-light rounded-3">
        <div class="container-fluid py-5">
            <h2 class="display-5 fw-bold">Wgrane grafiki</h2>

            <div class="img-container">
                <div class="uploaded-imgs-wrapper">

                    {% for file in files %}
                    <img class="uploaded-img"
                         data-image-editor-active-image
                         onclick="toggleActiveImage(img, '{{ url_for('recipes.download_file', filename=file) }}')"
                         src="{{ url_for('recipes.download_file', filename=file) }}">
                    {% endfor %}

                </div>
                <input
                        accept="image/*"
                        class="add-img"
                        id="add-image"
                        name="image"
                        type="file"/>
            </div>

        </div>
    </div>

    <div class="w-100" id="image-editor"></div>
</main>
{% endblock %}

{% block scripting %}
<script src="https://scaleflex.cloudimg.io/v7/plugins/filerobot-image-editor/latest/filerobot-image-editor.min.js"></script>
<script src="{{ url_for('static', filename='js/image_editor.js') }}"></script>
{% endblock %}